<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¯ãƒªã‚¢ - Motivative AI</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background: #1a1a1a;
      color: #fff;
    }
    .container {
      background: #2a2a2a;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    }
    h1 {
      color: #20c997;
      margin-bottom: 20px;
    }
    .button {
      background: #20c997;
      color: white;
      border: none;
      padding: 12px 24px;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
      margin: 10px 5px;
      transition: background 0.2s;
    }
    .button:hover {
      background: #18a478;
    }
    .button.danger {
      background: #ff6b6b;
    }
    .button.danger:hover {
      background: #ee5555;
    }
    .output {
      background: #1a1a1a;
      padding: 20px;
      border-radius: 8px;
      margin-top: 20px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      white-space: pre-wrap;
      max-height: 400px;
      overflow-y: auto;
    }
    .success { color: #20c997; }
    .warning { color: #ffd43b; }
    .error { color: #ff6b6b; }
    .info { color: #74c0fc; }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ§¹ Motivative AI - ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—</h1>
    
    <p>ã“ã®ãƒšãƒ¼ã‚¸ã‚’ä½¿ç”¨ã—ã¦ã€Motivative AIã®ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’å®Œå…¨ã«ã‚¯ãƒªã‚¢ã§ãã¾ã™ã€‚</p>
    
    <div>
      <button class="button" onclick="checkStorage()">ç¾åœ¨ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’ç¢ºèª</button>
      <button class="button danger" onclick="clearAllStorage()">ã™ã¹ã¦ã‚¯ãƒªã‚¢</button>
      <button class="button" onclick="redirectToApp()">ã‚¢ãƒ—ãƒªã‚’é–‹ã</button>
    </div>
    
    <div id="output" class="output"></div>
  </div>

  <script>
    const output = document.getElementById('output');
    
    function log(message, type = 'info') {
      const timestamp = new Date().toLocaleTimeString('ja-JP');
      const span = document.createElement('span');
      span.className = type;
      span.textContent = `[${timestamp}] ${message}\n`;
      output.appendChild(span);
      output.scrollTop = output.scrollHeight;
    }
    
    function checkStorage() {
      output.innerHTML = '';
      log('=== ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®ç¢ºèª ===', 'info');
      
      const keys = [
        'motivative-ai-activities',
        'motivative-ai-records',
        'motivative-ai-grid-layout',
        'motivative-ai-grid-items-order'
      ];
      
      let foundAny = false;
      
      keys.forEach(key => {
        const value = localStorage.getItem(key);
        if (value) {
          foundAny = true;
          const preview = value.length > 100 ? value.substring(0, 100) + '...' : value;
          log(`âœ“ ${key}`, 'warning');
          log(`  ã‚µã‚¤ã‚º: ${(value.length / 1024).toFixed(2)} KB`, 'info');
          log(`  ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼: ${preview}`, 'info');
        } else {
          log(`âœ— ${key} (ãƒ‡ãƒ¼ã‚¿ãªã—)`, 'success');
        }
      });
      
      if (!foundAny) {
        log('\nâœ… ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¯ã‚¯ãƒªãƒ¼ãƒ³ã§ã™ï¼', 'success');
      } else {
        log('\nâš ï¸ ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸã€‚ã€Œã™ã¹ã¦ã‚¯ãƒªã‚¢ã€ãƒœã‚¿ãƒ³ã§å‰Šé™¤ã§ãã¾ã™ã€‚', 'warning');
      }
      
      // ã™ã¹ã¦ã®motivative-aié–¢é€£ã‚­ãƒ¼ã‚’ãƒã‚§ãƒƒã‚¯
      const allKeys = Object.keys(localStorage).filter(k => k.startsWith('motivative-ai'));
      if (allKeys.length > keys.length) {
        log('\nğŸ“‹ ãã®ä»–ã®é–¢é€£ã‚­ãƒ¼:', 'info');
        allKeys.filter(k => !keys.includes(k)).forEach(k => {
          log(`  - ${k}`, 'info');
        });
      }
    }
    
    function clearAllStorage() {
      if (!confirm('æœ¬å½“ã«ã™ã¹ã¦ã®ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ\nã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚')) {
        return;
      }
      
      output.innerHTML = '';
      log('=== ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®ã‚¯ãƒªã‚¢é–‹å§‹ ===', 'warning');
      
      const keys = [
        'motivative-ai-activities',
        'motivative-ai-records',
        'motivative-ai-grid-layout',
        'motivative-ai-grid-items-order'
      ];
      
      let deletedCount = 0;
      
      // æŒ‡å®šã•ã‚ŒãŸã‚­ãƒ¼ã‚’å‰Šé™¤
      keys.forEach(key => {
        if (localStorage.getItem(key)) {
          localStorage.removeItem(key);
          log(`âœ“ å‰Šé™¤: ${key}`, 'success');
          deletedCount++;
        } else {
          log(`- ã‚¹ã‚­ãƒƒãƒ—: ${key} (å­˜åœ¨ã—ã¾ã›ã‚“)`, 'info');
        }
      });
      
      // ãã®ä»–ã®motivative-aié–¢é€£ã‚­ãƒ¼ã‚‚å‰Šé™¤
      const allKeys = Object.keys(localStorage).filter(k => k.startsWith('motivative-ai'));
      allKeys.forEach(key => {
        if (!keys.includes(key)) {
          localStorage.removeItem(key);
          log(`âœ“ å‰Šé™¤: ${key} (è¿½åŠ ã‚­ãƒ¼)`, 'success');
          deletedCount++;
        }
      });
      
      // ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚‚ã‚¯ãƒªã‚¢
      const sessionKeys = Object.keys(sessionStorage).filter(k => k.startsWith('motivative-ai'));
      if (sessionKeys.length > 0) {
        log('\n=== ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®ã‚¯ãƒªã‚¢ ===', 'warning');
        sessionKeys.forEach(key => {
          sessionStorage.removeItem(key);
          log(`âœ“ å‰Šé™¤: ${key}`, 'success');
          deletedCount++;
        });
      }
      
      log(`\nâœ… ã‚¯ãƒªã‚¢å®Œäº†ï¼ ${deletedCount}ä»¶ã®ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚`, 'success');
      log('\nğŸ“Œ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:', 'info');
      log('  1. ã€Œã‚¢ãƒ—ãƒªã‚’é–‹ãã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯', 'info');
      log('  2. ãƒšãƒ¼ã‚¸ãŒèª­ã¿è¾¼ã¾ã‚ŒãŸã‚‰ãƒªãƒ­ãƒ¼ãƒ‰ (Cmd+R / F5)', 'info');
      log('  3. ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‡ãƒ¼ã‚¿ãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã™', 'info');
    }
    
    function redirectToApp() {
      const appUrl = 'http://localhost:5174';
      log(`\nğŸš€ ${appUrl} ã‚’é–‹ãã¾ã™...`, 'success');
      setTimeout(() => {
        window.open(appUrl, '_blank');
      }, 500);
    }
    
    // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«è‡ªå‹•ãƒã‚§ãƒƒã‚¯
    window.addEventListener('load', () => {
      log('ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ãƒ„ãƒ¼ãƒ«ã‚’èµ·å‹•ã—ã¾ã—ãŸ', 'success');
      log('ã€Œç¾åœ¨ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’ç¢ºèªã€ãƒœã‚¿ãƒ³ã§çŠ¶æ…‹ã‚’ç¢ºèªã§ãã¾ã™\n', 'info');
    });
  </script>
</body>
</html>
